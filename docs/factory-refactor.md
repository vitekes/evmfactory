# Рефакторинг фабрик модулей

## Обзор изменений

В ходе рефакторинга фабрик модулей были внесены следующие улучшения:

1. Стандартизирована `BaseFactory` как основа для всех фабрик:
   - Исправлена ошибка с отсутствующим полем `paymentGateway`
   - Добавлены общие методы для всех фабрик
   - Унифицированы проверки входных параметров

2. Рефакторинг фабрик модулей:
   - `MarketplaceFactory` теперь использует поле `paymentGateway` вместо получения его из реестра
   - `SubscriptionManagerFactory` использует методы из базовой фабрики
   - `ContestFactory` переведена на использование `BaseFactory` и стандартизирована

## BaseFactory

Основные улучшения:

- Добавлено поле `paymentGateway` для хранения адреса платежного шлюза
- Добавлены общие методы:
  - `_copyServiceIfExists` - для копирования сервисов из основного модуля в экземпляр
  - `_generateInstanceId` - для создания уникальных идентификаторов экземпляров

## Ключевые улучшения ContestFactory

Обновленная версия фабрики конкурсов предлагает следующие преимущества:

- Наследование от `BaseFactory` для единообразия кода
- Использование `onlyFactoryAdmin` вместо кастомного `onlyGovernor`
- Более чистое и структурированное использование модификаторов и проверок
- Унифицированный интерфейс с другими фабриками
- Более четкая организация методов создания экземпляров

## Рекомендации по дальнейшей стандартизации

1. **Унифицировать имена методов**:
   - Использовать стандартные имена (`create<Module>`) во всех фабриках
   - Стандартизировать названия и порядок параметров

2. **Обработка ошибок**:
   - Использовать единый подход к именованию и определению ошибок
   - Добавить проверки pre/post условий

3. **Событийная модель**:
   - Унифицировать события во всех фабриках
   - Добавить индексированные параметры для улучшения фильтрации событий
