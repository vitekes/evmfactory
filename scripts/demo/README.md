# Демонстрационные сценарии

В этой папке находятся скрипты для демонстрации функциональности различных модулей системы.

## Структура

- `utils/` - вспомогательные функции и константы
  - `constants.ts` - константы для использования в демо-скриптах
  - `helpers.ts` - вспомогательные функции для работы с контрактами
  - `deployer.ts` - функции для деплоя базовых контрактов
- `contest-demo.ts` - демонстрация работы с конкурсами
- `marketplace-demo.ts` - демонстрация работы с маркетплейсом

## Запуск демонстраций

Для запуска демонстрационных сценариев используйте следующие команды:

### Демонстрация работы с конкурсами

```bash
npx hardhat run demo/contest-demo.ts --network localhost
```

### Демонстрация работы с маркетплейсом

```bash
npx hardhat run scripts/demo/marketplace-demo.ts --network localhost
```

#### Способы создания маркетплейса

Система поддерживает два способа создания маркетплейса:

1. **Через фабрику** (MarketplaceFactory) - основной рекомендуемый способ для продакшн.
   - Требует наличия роли FACTORY_ADMIN у создателя.
   - Управляет жизненным циклом маркетплейсов.
   - Обеспечивает централизованное создание и управление маркетплейсами.

2. **Напрямую** (без фабрики) - альтернативный способ для тестирования или особых случаев.
   - Не требует роли FACTORY_ADMIN.
   - Создает контракт маркетплейса напрямую.
   - Самостоятельно настраивает все необходимые сервисы и роли.

Демонстрационный скрипт сначала пытается создать маркетплейс через фабрику, и если это не удается, автоматически переключается на прямое создание.

## Использование

Перед запуском демонстраций убедитесь, что локальная сеть Hardhat запущена:

```bash
npx hardhat node
```

Вы также можете запустить демонстрации на тестовых сетях, указав соответствующую сеть в команде запуска.

## Разработка новых демонстраций

При создании новых демонстрационных сценариев рекомендуется использовать вспомогательные функции из папки `utils/` для деплоя базовых контрактов и взаимодействия с ними.

Основные шаги для создания нового демонстрационного сценария:

1. Развернуть базовые контракты с помощью функции `deployCore()`
2. Развернуть дополнительные контракты, необходимые для демонстрации
3. Зарегистрировать модули в реестре с помощью функции `registerModule()`
4. Выполнить демонстрационные операции с контрактами
5. Проверить результаты операций

Пример можно найти в существующих демонстрационных сценариях.
